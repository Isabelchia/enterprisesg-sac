<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  .dropbtn {
    background-color: #ED2E38;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
  }

  .dropbtn:hover, .dropbtn:focus {
    background-color: #D6121D;
  }

  .dropdown {
    position: relative;
    display: inline-block;
  }

  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    min-width: 200px;
    overflow: auto;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
  }

  .dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
  }

  .dropdown a:hover {background-color: #ddd;}

  .show {display: block;}

  code {
    padding: 1px 5px;
    white-space: pre-wrap;
    background-color: #eff0f1;
  }
  
  li {
    line-height:2;
  }

  ol:first-child li:first-child {
    opacity: 1.0;
  }
</style>
</head>
<body>

  <h2>Admin Guide for SAC Website</h2>

  <div class="dropdown">
    <button onclick="myFunction()" class="dropbtn">I want to â–¾</button>
    <div id="myDropdown" class="dropdown-content">
      <a href="#add-training-course">Add a new training course</a>
      <a href="#">Add a new press release</a>
      <a href="#">Add a new event</a>
      <a href="#">Edit list of Certified Companies</a>
    </div>
  </div>
  
  <a class="admin-content-section" name="add-training-course">
    <h2>Add a new Training Course</h2>  
    <h3>Add new post for training course</h3>
    <ol>
      <li>
        <input type="text" id="input-title" size="50" placeholder="Enter title of course" val=""/><br/>
        <input type="text" id="input-date" size="20" placeholder="Enter date of course" val=""/>
      </li>
      <li>In Github repository, click 'Create new file' button.</li>
      <li>In the 'Name your file...' input of the Github file editor, enter <span>'newsroom/courses/_posts/</span><span class="page-url-date"></span>-<span class="page-url-path"></span>.md'</li>
      <li>Copy and paste the header code snippet below into the text editor.
        <pre>
          <code>
            ---
            layout: post
            title: <span class="page-title"></span>
            date: <span class="page-url-date"></span>
            permalink: /courses/<span class="page-url-path"></span>
            ---
          </code>
        </pre>
      </li>
      <li>Add course content in the text editor below the header code. You can follow the format using this <a href="https://raw.githubusercontent.com/isomerpages/enterprisesg-sac/staging/newsroom/courses/_posts/2019-05-22-training-course.md" target="_blank">sample post</a></li>
      <li>Click on "Commit changes" button when you have finished.</li>
    </ol>
    
    <h3>Update table of training courses</h3>
    <ol>
      <li>Inside Github repository, go to '_services' folder and then go to '1-training.md' file. Click on the 'Edit this file' button. (Alternatively go straight to this link <a href="https://github.com/isomerpages/enterprisesg-sac/edit/staging/_services/1-training.md" target="_blank">https://github.com/isomerpages/enterprisesg-sac/edit/staging/_services/1-training.md</a></li>
      <li>Edit the section under 'Recent Courses / Workshops / Seminars'.<br/>Insert this table row <code>| <span class="page-url-date"></span> | <span class="page-title"></span> |</code> in the section as shown below:
        <pre>
        <code>
        //section of code for reference
        
        ### Recent Courses / Workshops / Seminars

        | Date | Title |
        |--
        <span style="color:red; font-style:bold">// Insert the new table row here</span>
        | 24-25 June 2019 | [Training course on ISO/TS 22003:2013 and ISO 22000:2018](/courses/training-course-on-ISOTS-220032013-and-ISO-220002018){:target="_blank"} |
        </code>
        </pre>
      </li>
    </ol>
  </a>  
<script>
  /* When the user clicks on the button, 
  toggle between hiding and showing the dropdown content */
  function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
  }

  // Close the dropdown if the user clicks outside of it
  window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      var i;
      for (i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
        }
      }
    }
  }
 
  function populateTitleAndDate(titleInput, dateInput) {
    if (titleInput.value.length > 0 && dateInput.value.length > 0) {
      var pageTitles = document.getElementsByClassName("page-title");
      for (var i=0; i<pageTitles.length; i++) {
        pageTitles[i].innerHTML = titleInput.value + " (" + dateInput.value + ")";
      }
      
      var today = new Date();
      var dd = today.getDate()+'';
      var mm = (today.getMonth()+1)+''; //January is 0!
      var yyyy = today.getFullYear();
      console.log(mm.length);
      if (mm.length < 2) mm = '0' + mm;
      if (dd.length < 2) dd = '0' + dd;
      var pageUrlDates = document.getElementsByClassName("page-url-date");
      for (var i=0; i<pageUrlDates.length; i++) {
        pageUrlDates[i].innerHTML = yyyy+'-'+mm+'-'+dd;
      }
      
      var pageUrlPathText = titleInput.value.replace(/ /g,"-").replace(":","").replace("/","");
      var pageUrlPaths = document.getElementsByClassName("page-url-path");
      for (var i=0; i<pageUrlPaths.length; i++) {
        pageUrlPaths[i].innerHTML = pageUrlPathText; 
      }
      
      var listItems = document.getElementsByTagName("li");
      for (var i=0; i<listItems.length; i++) {
        listItems[i].style.opacity = 1.0;
      }
    }
  }
  
  var titleInput = document.getElementById("input-title");
  var dateInput = document.getElementById("input-date");
  titleInput.addEventListener("change", function(event){
    populateTitleAndDate(titleInput, dateInput);
  });
  dateInput.addEventListener("change", function(event){
    populateTitleAndDate(titleInput, dateInput);
  });
</script>

</body>
</html>
